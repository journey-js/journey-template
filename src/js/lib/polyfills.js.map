{"version":3,"file":"polyfills.js","sources":["../src/polyfills.js"],"sourcesContent":["// NOTE: The following polyfills are constructed based on several reference\n// materials which include the original legacy.js definitions, polyfills found\n// in MDN (which roughly followed the ES6 spec), and open-source libs\n// (es5-shim). All of which were rewritten to be compliant to the linter, and\n// where readability and flow can be improved.\n//\n// TODO: Better presence checks (i.e. typeof thing === 'function')\n// TODO: Better global attachments (i.e. Promise, requestAnimationFrame, etc.)\n// TODO: Add references to relevant specs and sources\n// TODO: Tests and coverage\n// TODO: Optimizations\n\n// Array.isArray\nif (!Array.isArray) {\n\tArray.isArray = function (arg) {\n\t\treturn Object.prototype.toString.call(arg) === '[object Array]';\n\t};\n}\n\n// Array.prototype.every\nif (!Array.prototype.every) {\n\tArray.prototype.every = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.every called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) return false;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// Array.prototype.filter\nif (!Array.prototype.filter) {\n\tArray.prototype.filter = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.filter called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst results = [];\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) continue;\n\t\t\tresults.push(array[index]);\n\t\t}\n\n\t\treturn results;\n\t};\n}\n\n// Array.prototype.find\nif (!Array.prototype.find) {\n\tArray.prototype.find = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.find called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (!callback.call(thisArg, array[index], index, array)) continue;\n\t\t\treturn array[index];\n\t\t}\n\n\t\treturn undefined;\n\t};\n}\n\n// Array.prototype.forEach\nif (!Array.prototype.forEach) {\n\tArray.prototype.forEach = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.forEach called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tcallback.call(thisArg, array[index], index, array);\n\t\t}\n\n\t\treturn undefined;\n\t};\n}\n\n// Array.prototype.indexOf\nif (!Array.prototype.indexOf) {\n\tArray.prototype.indexOf = function (searchElement, fromIndex) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.indexOf called on null or undefined');\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst fromIndexInt = fromIndex >>> 0;\n\t\tconst fromIndexAdjusted = Math.max(fromIndexInt >= 0 ? fromIndexInt : arrayLength - Math.abs(fromIndexInt), 0);\n\n\t\tfor (let index = fromIndexAdjusted; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tif (array[index] !== searchElement) continue;\n\t\t\treturn index;\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\n// Array.prototype.map\nif (!Array.prototype.map) {\n\tArray.prototype.map = function (callback, thisArg) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.map called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst results = [];\n\n\t\tfor (let index = 0; index < arrayLength; index++) {\n\t\t\tif (!Object.hasOwnProperty.call(array, index)) continue;\n\t\t\tresults[index] = callback.call(thisArg, array[index], index, array);\n\t\t}\n\n\t\treturn results;\n\t};\n}\n\n// Array.prototype.reduce\nif (!Array.prototype.reduce) {\n\tArray.prototype.reduce = function (callback, initialValue) {\n\t\tif (this === null || this === undefined)\n\t\t\tthrow new TypeError('Array.prototype.map called on null or undefined');\n\n\t\tif (typeof callback !== 'function')\n\t\t\tthrow new TypeError(`${callback} is not a function`);\n\n\t\tconst array = Object(this);\n\t\tconst arrayLength = array.length >>> 0;\n\t\tconst isInitialValuePresent = arguments.length === 2;\n\n\t\tlet index = 0;\n\t\tlet accumulator = undefined;\n\n\t\tif (isInitialValuePresent) {\n\t\t\taccumulator = initialValue;\n\t\t} else {\n\t\t\tlet isViableInitialValueFromArray = false;\n\n\t\t\tfor (; !isViableInitialValueFromArray && index < arrayLength; index++) {\n\t\t\t\tisViableInitialValueFromArray = Object.prototype.hasOwnProperty.call(array, index);\n\t\t\t\tif (isViableInitialValueFromArray) accumulator = array[index];\n\t\t\t}\n\n\t\t\tif (!isViableInitialValueFromArray)\n\t\t\t\tthrow new TypeError('Reduce of empty array with no initial value');\n\t\t}\n\n\t\tfor (; index < arrayLength; index++) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(array, index)) continue;\n\t\t\taccumulator = callback.call(undefined, accumulator, array[index], index, array);\n\t\t}\n\n\t\treturn accumulator;\n\t};\n}\n\n// Date.now\nif (!Date.now) {\n\tDate.now = function () {\n\t\treturn new Date().getTime();\n\t};\n}\n\n// Function.prototype.bind\nif (!Function.prototype.bind) {\n\tFunction.prototype.bind = function (thisArg, ...args) {\n\t\tif (typeof this !== 'function')\n\t\t\tthrow new TypeError('Bind must be called on a function');\n\n\t\tconst target = this;\n\n\t\tconst BoundFunctionParent = function () { };\n\t\tBoundFunctionParent.prototype = this.prototype || BoundFunctionParent.prototype;\n\n\t\tconst boundFunction = function (...callArgs) {\n\t\t\tconst isCalledAsConstructor = this instanceof BoundFunctionParent;\n\t\t\treturn target.apply(isCalledAsConstructor ? this : thisArg, [...args, ...callArgs]);\n\t\t};\n\t\tboundFunction.prototype = new BoundFunctionParent();\n\n\t\treturn boundFunction;\n\t};\n}\n\n// Object.assign\nif (!Object.assign) {\n\tObject.assign = function (target, ...sources) {\n\t\tif (target == null)\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\n\t\tconst to = Object(target);\n\t\tconst sourcesLength = sources.length;\n\n\t\tfor (let index = 0; index < sourcesLength; index++) {\n\t\t\tconst nextSource = sources[index];\n\t\t\tfor (const nextKey in nextSource) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(nextSource, nextKey)) continue;\n\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n}\n\n// Object.create\nif (!Object.create) {\n\tconst EmptyConstructor = function () { };\n\n\tObject.create = function (prototype = {}, properties = {}) {\n\t\tif (prototype !== Object(prototype) && prototype !== null)\n\t\t\tthrow TypeError('Object prototype may only be an Object or null');\n\n\t\tEmptyConstructor.prototype = prototype;\n\t\tconst result = new EmptyConstructor();\n\t\tObject.defineProperties(result, properties);\n\t\tresult.__proto__ = prototype;\n\n\t\treturn result;\n\t};\n}\n\n// Object.defineProperty\n// NOTE: The original legacy.js definition of Object.defineProperty wasn't\n// fancy. It silently didn't support everything and only assigned value.\n{\n\tconst isDefinePropertyWorking = function () {\n\t\ttry {\n\t\t\tObject.defineProperty({}, 'test', { get() { }, set() { } });\n\t\t\tif (document) Object.defineProperty(document.createElement('div'), 'test', { value: 0 });\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (!isDefinePropertyWorking()) {\n\t\tObject.defineProperty = function (obj, prop, desc) {\n\t\t\tobj[prop] = desc.get ? desc.get() : desc.value;\n\t\t};\n\t}\n}\n\n// Object.defineProperties\n// NOTE: The original legacy.js definition of Object.defineProperties wasn't\n// fancy. All it did was reuse Object.defineProperty which is also potentially\n// polyfilled.\n{\n\tconst isDefinePropertiesWorking = function () {\n\t\ttry {\n\t\t\tObject.defineProperties({}, { test: { value: 0 } });\n\t\t\tif (document) Object.defineProperties(document.createElement('div'), { test: { value: 0 } });\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (!isDefinePropertiesWorking()) {\n\t\tObject.defineProperties = function (obj, props) {\n\t\t\tfor (const prop in props) {\n\t\t\t\tif (!Object.hasOwnProperty.call(props, prop)) continue;\n\t\t\t\tObject.defineProperty(obj, prop, props[prop]);\n\t\t\t}\n\t\t};\n\t}\n}\n\n// Object.freeze\n// NOTE: This just adds Object.freeze presence. Nothing can be done.\nif (!Object.freeze) {\n\tObject.freeze = function (obj) {\n\t\treturn obj;\n\t};\n}\n\n// Object.keys\nif (!Object.keys) {\n\tconst hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString');\n\tconst dontEnumProps = ['__proto__', 'toString', 'toLocaleString', 'valueOf', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable', 'constructor'];\n\tconst dontEnumPropsLength = dontEnumProps.length;\n\n\tObject.keys = function (obj) {\n\t\tif (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null))\n\t\t\tthrow new TypeError('Object.keys called on non-object');\n\n\t\tconst result = [];\n\n\t\tfor (const prop in obj) {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(obj, prop)) continue;\n\t\t\tresult.push(prop);\n\t\t}\n\n\t\tif (hasDontEnumBug) {\n\t\t\tfor (let index = 0; index < dontEnumPropsLength; index++) {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(obj, dontEnumProps[index])) continue;\n\t\t\t\tresult.push(dontEnumProps[index]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\n// Promise\n// TODO: Better global attachment\nif (window && !window.Promise) {\n\tconst PENDING = {};\n\tconst FULFILLED = {};\n\tconst REJECTED = {};\n\n\tconst Promise = window.Promise = function (callback) {\n\t\tconst fulfilledHandlers = [];\n\t\tconst rejectedHandlers = [];\n\t\tlet state = PENDING;\n\t\tlet result;\n\t\tlet dispatchHandlers;\n\n\t\tconst makeResolver = (newState) => {\n\t\t\treturn function (value) {\n\t\t\t\tif (state !== PENDING) return;\n\t\t\t\tresult = value;\n\t\t\t\tstate = newState;\n\t\t\t\tdispatchHandlers = makeDispatcher((state === FULFILLED ? fulfilledHandlers : rejectedHandlers), result);\n\t\t\t\twait(dispatchHandlers);\n\t\t\t};\n\t\t};\n\n\t\tconst fulfill = makeResolver(FULFILLED);\n\t\tconst reject = makeResolver(REJECTED);\n\n\t\ttry {\n\t\t\tcallback(fulfill, reject);\n\t\t} catch (err) {\n\t\t\treject(err);\n\t\t}\n\n\t\treturn {\n\t\t\t// `then()` returns a Promise - 2.2.7\n\t\t\tthen(onFulfilled, onRejected) {\n\t\t\t\tconst promise2 = new Promise((fulfill, reject) => {\n\n\t\t\t\t\tconst processResolutionHandler = (handler, handlers, forward) => {\n\t\t\t\t\t\tif (typeof handler === 'function') {\n\t\t\t\t\t\t\thandlers.push(p1result => {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tresolve(promise2, handler(p1result), fulfill, reject);\n\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandlers.push(forward);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tprocessResolutionHandler(onFulfilled, fulfilledHandlers, fulfill);\n\t\t\t\t\tprocessResolutionHandler(onRejected, rejectedHandlers, reject);\n\n\t\t\t\t\tif (state !== PENDING) {\n\t\t\t\t\t\twait(dispatchHandlers);\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t\treturn promise2;\n\t\t\t},\n\t\t\t'catch'(onRejected) {\n\t\t\t\treturn this.then(null, onRejected);\n\t\t\t}\n\t\t};\n\t};\n\n\tPromise.all = function (promises) {\n\t\treturn new Promise((fulfil, reject) => {\n\t\t\tconst result = [];\n\t\t\tlet pending;\n\t\t\tlet i;\n\n\t\t\tif (!promises.length) {\n\t\t\t\tfulfil(result);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst processPromise = (promise, i) => {\n\t\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\t\tpromise.then(value => {\n\t\t\t\t\t\tresult[i] = value;\n\t\t\t\t\t\t--pending || fulfil(result);\n\t\t\t\t\t}, reject);\n\t\t\t\t} else {\n\t\t\t\t\tresult[i] = promise;\n\t\t\t\t\t--pending || fulfil(result);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tpending = i = promises.length;\n\n\t\t\twhile (i--) {\n\t\t\t\tprocessPromise(promises[i], i);\n\t\t\t}\n\t\t});\n\t};\n\n\tPromise.resolve = function (value) {\n\t\treturn new Promise(fulfill => {\n\t\t\tfulfill(value);\n\t\t});\n\t};\n\n\tPromise.reject = function (reason) {\n\t\treturn new Promise((fulfill, reject) => {\n\t\t\treject(reason);\n\t\t});\n\t};\n\n\t// TODO use MutationObservers or something to simulate setImmediate\n\tconst wait = function (callback) {\n\t\tsetTimeout(callback, 0);\n\t};\n\n\tconst makeDispatcher = function (handlers, result) {\n\t\treturn function () {\n\t\t\tfor (let handler; handler = handlers.shift();) {\n\t\t\t\thandler(result);\n\t\t\t}\n\t\t};\n\t};\n\n\tconst resolve = function (promise, x, fulfil, reject) {\n\t\tlet then;\n\t\tif (x === promise) {\n\t\t\tthrow new TypeError(`A promise's fulfillment handler cannot return the same promise`);\n\t\t}\n\t\tif (x instanceof Promise) {\n\t\t\tx.then(fulfil, reject);\n\t\t} else if (x && (typeof x === 'object' || typeof x === 'function')) {\n\t\t\ttry {\n\t\t\t\tthen = x.then;\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (typeof then === 'function') {\n\t\t\t\tlet called;\n\n\t\t\t\tconst resolvePromise = function (y) {\n\t\t\t\t\tif (called) return;\n\t\t\t\t\tcalled = true;\n\t\t\t\t\tresolve(promise, y, fulfil, reject);\n\t\t\t\t};\n\t\t\t\tconst rejectPromise = function (r) {\n\t\t\t\t\tif (called) return;\n\t\t\t\t\tcalled = true;\n\t\t\t\t\treject(r);\n\t\t\t\t};\n\n\t\t\t\ttry {\n\t\t\t\t\tthen.call(x, resolvePromise, rejectPromise);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfulfil(x);\n\t\t\t}\n\t\t} else {\n\t\t\tfulfil(x);\n\t\t}\n\t};\n\n}\n\n// String.prototype.trim\nif (!String.prototype.trim) {\n\tString.prototype.trim = function () {\n\t\treturn this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\t};\n}\n\n// Node.prototype.contains\n// NOTE: Node doesn't exist in IE8. Nothing can be done.\nif (window && window.Node && window.Node.prototype && !window.Node.prototype.contains) {\n\tNode.prototype.contains = function (node) {\n\t\tif (!node)\n\t\t\tthrow new TypeError('node required');\n\n\t\tdo {\n\t\t\tif (this === node) return true;\n\t\t} while (node = node && node.parentNode);\n\n\t\treturn false;\n\t};\n}\n\n// performance.now\n// NOTE: Setup requires Date.now() to be present already.\nif (window && window.performance && !window.performance.now) {\n\twindow.performance = window.performance || {};\n\n\tconst nowOffset = Date.now();\n\n\twindow.performance.now = function () {\n\t\treturn Date.now() - nowOffset;\n\t};\n}\n\n// requestAnimationFrame\n// cancelAnimationFrame\nif (window && !(window.requestAnimationFrame && window.cancelAnimationFrame)) {\n\tlet lastTime = 0;\n\twindow.requestAnimationFrame = function (callback) {\n\t\tconst currentTime = Date.now();\n\t\tconst timeToNextCall = Math.max(0, 16 - (currentTime - lastTime));\n\t\tconst id = window.setTimeout(() => { callback(currentTime + timeToNextCall); }, timeToNextCall);\n\t\tlastTime = currentTime + timeToNextCall;\n\t\treturn id;\n\t};\n\twindow.cancelAnimationFrame = function (id) {\n\t\tclearTimeout(id);\n\t};\n}\n\n// addEventListener\n// removeEventListener\n// https://gist.github.com/Rich-Harris/6010282 via https://gist.github.com/jonathantneal/2869388\nif (document && window && !(window.addEventListener && window.removeEventListener)) {\n\n\tconst Event = function (e, element) {\n\t\tconst instance = this;\n\n\t\tfor (const property in e) {\n\t\t\tinstance[property] = e[property];\n\t\t}\n\n\t\tinstance.currentTarget = element;\n\t\tinstance.target = e.srcElement || element;\n\t\tinstance.timeStamp = +new Date();\n\n\t\tinstance.preventDefault = function () {\n\t\t\te.returnValue = false;\n\t\t};\n\n\t\tinstance.stopPropagation = function () {\n\t\t\te.cancelBubble = true;\n\t\t};\n\t};\n\n\tconst addEventListener = function (type, listener) {\n\t\tconst element = this;\n\t\tconst listeners = element.listeners || (element.listeners = []);\n\t\tconst i = listeners.length;\n\n\t\tlisteners[i] = [listener, e => { listener.call(element, new Event(e, element)); }];\n\t\telement.attachEvent('on' + type, listeners[i][1]);\n\t};\n\n\tconst removeEventListener = function (type, listener) {\n\t\tconst element = this;\n\n\t\tif (!element.listeners) return;\n\n\t\tconst listeners = element.listeners;\n\t\tlet i = listeners.length;\n\n\t\twhile (i--) {\n\t\t\tif (listeners[i][0] !== listener) continue;\n\t\t\telement.detachEvent('on' + type, listeners[i][1]);\n\t\t}\n\t};\n\n\twindow.addEventListener = document.addEventListener = addEventListener;\n\twindow.removeEventListener = document.removeEventListener = removeEventListener;\n\n\tif ('Element' in window) {\n\t\twindow.Element.prototype.addEventListener = addEventListener;\n\t\twindow.Element.prototype.removeEventListener = removeEventListener;\n\t} else {\n\t\t// First, intercept any calls to document.createElement - this is necessary\n\t\t// because the CSS hack (see below) doesn't come into play until after a\n\t\t// node is added to the DOM, which is too late for a lot of Ractive setup work\n\t\tconst origCreateElement = document.createElement;\n\n\t\tdocument.createElement = function (tagName) {\n\t\t\tconst el = origCreateElement(tagName);\n\t\t\tel.addEventListener = addEventListener;\n\t\t\tel.removeEventListener = removeEventListener;\n\t\t\treturn el;\n\t\t};\n\n\t\t// Then, mop up any additional elements that weren't created via\n\t\t// document.createElement (i.e. with innerHTML).\n\t\tconst head = document.getElementsByTagName('head')[0];\n\t\tconst style = document.createElement('style');\n\n\t\thead.insertBefore(style, head.firstChild);\n\n\t\t//style.styleSheet.cssText = '*{-ms-event-prototype:expression(!this.addEventListener&&(this.addEventListener=addEventListener)&&(this.removeEventListener=removeEventListener))}';\n\t}\n}\n\n// window.getComputedStyle\n// https://github.com/jonathantneal/Polyfills-for-IE8/blob/master/getComputedStyle.js\nif (document && window && !window.getComputedStyle) {\n\n\tconst noop = function () { };\n\tconst borderSizes = {};\n\tconst normalProps = {\n\t\tfontWeight: 400,\n\t\tlineHeight: 1.2, // actually varies depending on font-family, but is generally close enough...\n\t\tletterSpacing: 0\n\t};\n\n\tconst getPixelSize = function (element, style, property, fontSize) {\n\t\tconst value = style[property];\n\t\tconst rawSize = parseFloat(value);\n\t\tconst rawUnit = value.split(/\\d/)[0];\n\t\tconst isMeasureNotSizeAndUnit = isNaN(rawSize) && /^thin|medium|thick$/.test(value);\n\t\tconst size = isMeasureNotSizeAndUnit ? getBorderPixelSize(value) : rawSize;\n\t\tconst unit = isMeasureNotSizeAndUnit ? '' : rawUnit;\n\n\t\tfontSize = fontSize != null ? fontSize\n\t\t\t: /%|em/.test(unit) && element.parentElement ? getPixelSize(element.parentElement, element.parentElement.currentStyle, 'fontSize', null)\n\t\t\t\t: 16;\n\n\t\tconst rootSize = property == 'fontSize' ? fontSize\n\t\t\t: /width/i.test(property) ? element.clientWidth\n\t\t\t\t: element.clientHeight;\n\n\t\treturn (unit == 'em') ? size * fontSize\n\t\t\t: (unit == 'in') ? size * 96\n\t\t\t\t: (unit == 'pt') ? size * 96 / 72\n\t\t\t\t\t: (unit == '%') ? size / 100 * rootSize\n\t\t\t\t\t\t: size;\n\t};\n\n\tconst getBorderPixelSize = function (size) {\n\n\t\t// `thin`, `medium` and `thick` vary between browsers. (Don't ever use them.)\n\t\tif (!borderSizes[size]) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.style.display = 'block';\n\t\t\tdiv.style.position = 'fixed';\n\t\t\tdiv.style.width = div.style.height = '0';\n\t\t\tdiv.style.borderRight = size + ' solid black';\n\t\t\tdocument.getElementsByTagName('body')[0].appendChild(div);\n\n\t\t\tconst bcr = div.getBoundingClientRect();\n\n\t\t\tborderSizes[size] = bcr.right - bcr.left;\n\t\t}\n\n\t\treturn borderSizes[size];\n\t};\n\n\tconst setShortStyleProperty = function (style, property) {\n\t\tconst borderSuffix = property == 'border' ? 'Width' : '';\n\t\tconst t = `${property}Top${borderSuffix}`;\n\t\tconst r = `${property}Right${borderSuffix}`;\n\t\tconst b = `${property}Bottom${borderSuffix}`;\n\t\tconst l = `${property}Left${borderSuffix}`;\n\n\t\tstyle[property] = (style[t] == style[r] == style[b] == style[l] ? [style[t]]\n\t\t\t: style[t] == style[b] && style[l] == style[r] ? [style[t], style[r]]\n\t\t\t\t: style[l] == style[r] ? [style[t], style[r], style[b]]\n\t\t\t\t\t: [style[t], style[r], style[b], style[l]]).join(' ');\n\t};\n\n\tconst CSSStyleDeclaration = function (element) {\n\n\t\tconst style = this;\n\t\tconst currentStyle = element.currentStyle;\n\t\tconst fontSize = getPixelSize(element, currentStyle, 'fontSize', null);\n\n\t\t// TODO tidy this up, test it, send PR to jonathantneal!\n\t\tfor (const property in currentStyle) {\n\t\t\tif (currentStyle[property] === 'normal' && normalProps.hasOwnProperty(property)) {\n\t\t\t\tstyle[property] = normalProps[property];\n\t\t\t} else if (/width|height|margin.|padding.|border.+W/.test(property)) {\n\t\t\t\tif (currentStyle[property] === 'auto') {\n\t\t\t\t\tif (/^width|height/.test(property)) {\n\t\t\t\t\t\t// just use clientWidth/clientHeight...\n\t\t\t\t\t\tstyle[property] = (property === 'width' ? element.clientWidth : element.clientHeight) + 'px';\n\t\t\t\t\t} else if (/(?:padding)?Top|Bottom$/.test(property)) {\n\t\t\t\t\t\tstyle[property] = '0px';\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tstyle[property] = getPixelSize(element, currentStyle, property, fontSize) + 'px';\n\t\t\t\t}\n\t\t\t} else if (property === 'styleFloat') {\n\t\t\t\tstyle.float = currentStyle[property];\n\t\t\t} else {\n\t\t\t\tstyle[property] = currentStyle[property];\n\t\t\t}\n\t\t}\n\n\t\tsetShortStyleProperty(style, 'margin');\n\t\tsetShortStyleProperty(style, 'padding');\n\t\tsetShortStyleProperty(style, 'border');\n\n\t\tstyle.fontSize = fontSize + 'px';\n\n\t\treturn style;\n\t};\n\n\tCSSStyleDeclaration.prototype = {\n\t\tconstructor: CSSStyleDeclaration,\n\t\tgetPropertyPriority: noop,\n\t\tgetPropertyValue(prop) {\n\t\t\treturn this[prop] || '';\n\t\t},\n\t\titem: noop,\n\t\tremoveProperty: noop,\n\t\tsetProperty: noop,\n\t\tgetPropertyCSSValue: noop\n\t};\n\n\twindow.getComputedStyle = function (element) {\n\t\treturn new CSSStyleDeclaration(element);\n\t};\n}\n"],"names":["const","let","this"],"mappings":"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"}